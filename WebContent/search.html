<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no">


<meta name="description" content="">
<meta name="author" content="">
<title>Tour for Korea</title>

<!-- Bootstrap core CSS -->
<link href="css/bootstrap.css" rel="stylesheet">

<!-- Custom fonts for this template -->
<link href="css/font-awesome.css" rel="stylesheet" type="text/css">

<!-- Plugin CSS -->
<link href="css/dataTables.bootstrap4.css" rel="stylesheet">

<!-- Custom styles for this template -->
<link href="css/sb-admin.css" rel="stylesheet">

<script src="js/jquery.js"></script>


<script type="text/javascript">
	var table_state = false;
	$(document).ready(function() {

		var table_template = "<tr data-href='_SITE'><td>_RANK</td><td>_NAME</td><td>_AREA</td><td>_ADDRESS</td></tr>";
		// 만들어 질 경우 옮겨질 사이트
		var result_url = "";
		var s = "";
		var str = "";
		
		$.ajax({
			url : "search.jsp",
			type : "GET",
			success : function(data) {
				data = JSON.parse(data);
				
		   		data.forEach(function(item, index) {
		   			s = table_template;
		   			result_url = "tourspot.jsp?id=" + item.id;
		   			s = s.replace("_SITE", result_url);
		   			s = s.replace("_RANK", item.rank);
		   			s = s.replace("_NAME", item.tourspot);
		   			s = s.replace("_AREA", item.area);
		   			s = s.replace("_ADDRESS", item.address);
		   			str += s;
		   		});			
		   		$("#table_body").empty;					
		   		$("#table_body").append(str);
					console.log("SUCCESS");
					  $(document).ready(function() {
						    $('#dataTable2').DataTable();
						  });

			}
		});
		
		table_state = true;
	});

	console.log("END");

	if(table_state == true){
		console.log(table_state);
		(function(){
			  $(document).ready(function() {
				    $('#dataTable2').DataTable();
				  });
		})(jQuery);
	}

	</script>
	<script src="js/jquery.dataTables.js"></script>
	<script src="js/dataTables.bootstrap4.js"></script>
</head>
<body class="fixed-nav" id="page-top">

	<div class="content-wrapper py-3">

		<div class="container-fluid">

			<!-- Navigation -->
			<nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top"
				id="mainNav">
				<a class="navbar-brand" href="#">Tour for Korea</a>
				<button class="navbar-toggler navbar-toggler-right" type="button"
					data-toggle="collapse" data-target="#navbarResponsive"
					aria-controls="navbarResponsive" aria-expanded="false"
					aria-label="Toggle navigation">
					<span class="navbar-toggler-icon"></span>
				</button>
				<div class="collapse navbar-collapse" id="navbarResponsive">
					<ul class="navbar-nav navbar-sidenav">
						<li class="nav-item" data-toggle="tooltip"
							data-placement="right" title="Home""><a class="nav-link"
							href="home.html"> <i class="fa fa-fw fa-dashboard"></i> <span
								class="nav-link-text"> Home</span>
						</a></li>
						<li class="nav-item  active" data-toggle="tooltip" data-placement="right"
							title="Tables"><a class="nav-link" href="search.html"> <i
								class="fa fa-fw fa-table"></i> <span class="nav-link-text">
									Search Tour Spot</span>
						</a></li>

						<li class="nav-item" data-toggle="tooltip" data-placement="right"
							title="Charts"><a
							class="nav-link nav-link-collapse collapsed"
							data-toggle="collapse" href="#collapseComponents"> <i
								class="fa fa-fw fa-area-chart"></i> <span class="nav-link-text">
									Rank</span>
						</a>
							<ul class="sidenav-second-level collapse" id="collapseComponents">
								<li><a href="#">Monthly Rank</a></li>
								<li><a href="#">Job Rank</a></li>
								<li><a href="#">Nation Rank</a></li>
							</ul></li>


						<!--    active -->

						<li class="nav-item" data-toggle="tooltip" data-placement="right"
							title="Recommend System"><a
							class="nav-link nav-link-collapse collapsed"
							data-toggle="collapse" href="#collapseMulti"> <i
								class="fa fa-fw fa-sitemap"></i> <span class="nav-link-text">
									Recommend System </span>
						</a>
							<ul class="sidenav-second-level collapse" id="collapseMulti">
								<li><a href="score_recommend_input.html">Personality</a></li>
								<li><a href="#">Basket Recommend</a></li>
							</ul></li>

					</ul>
					<ul class="navbar-nav sidenav-toggler">
						<li class="nav-item"><a class="nav-link text-center"
							id="sidenavToggler"> <i class="fa fa-fw fa-angle-left"></i>
						</a></li>
					</ul>
				</div>
			</nav>
			<!-- 여기서 입력 받습니다. -->
						
			<div class="table-responsive">
              <table class="table table-bordered table-hover" width="100%" id="dataTable2" cellspacing="0">
                <thead>
                  <tr>
                    <th width = "10%">Rank #</th>
                    <th>Tourspot</th>
                    <th>Area</th>
                    <th>Address</th>
                  </tr>
                </thead>
                <tfoot>
                  <tr>
                    <th>Rank #</th>
                    <th>Tourspot</th>
                    <th>Area</th>
                    <th>Address</th>
                  </tr>
                </tfoot>
                <tbody id = "table_body">
                </tbody>
              </table>
            </div>
          </div>
          <div class="card-footer small text-muted">
            Updated yesterday at 11:59 PM
          </div>
        </div>
        <!-- table-responsive -->
			
			
					

		</div>
		<!-- /.container-fluid -->

	</div>
	<!-- /.content-wrapper -->

	<!-- Scroll to Top Button -->
	<a class="scroll-to-top rounded" href="#page-top"> <i
		class="fa fa-angle-up"></i>
	</a>

	<!-- Bootstrap core JavaScript -->

	<script src="js/popper.js"></script>
	<script src="js/bootstrap.js"></script>

	<!-- Plugin JavaScript -->
	<script src="js/jquery.easing.js"></script>

	<!-- Custom scripts for this template -->
	<script src="js/sb-admin.js"></script>
</body>
</html>